<!DOCTYPE html>
<html class="h-100" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <title>Nav fragment - rest intentionally left empty</title>
</head>

<body class="d-flex flex-column h-100">

    <!-- barra de navegación bootstrap 5 -->
    <header th:fragment="nav(active)">
        <nav class="navbar navbar-expand-lg" id = "navPrincipal">
            <div class="container-fluid">
                <button th:class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarOpciones" aria-controls="navbarOpciones" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <!-- nombre del sitio; es un enlace que lleva a la página ppal -->
                <a class="navbar-brand mx-auto mx-lg-0 me-lg-auto" th:href="@{/}" href="/" >
                    <img th:src="@{/img/logo.svg}" alt="logo G2W" width="150" height="28" class="d-inline-block align-text-top " id = "logoNav">
                </a>
                <!-- opciones de navegación -->
                <div class="collapse navbar-collapse mx-auto" id="navbarOpciones">
                    <ul class="navbar-nav mx-auto">
                        <th:block th:if="true">
                            <li class="nav-item mx-3" th:classappend="${active == 'deportes'} ? 'active'">
                                <a class="nav-link" th:href="${active == 'deportes'} ? '#' : @{/}">Todos los deportes</a>
                            </li>
                            <li class="nav-item mx-3 " th:if="${session?.u?.hasRole('USER')}" th:classappend="${active == 'apuestas'} ? 'active'">
                                <a class="nav-link"  th:href="${active == 'apuestas'} ? '#' : @{/}">Mis apuestas</a>
                            </li>
                            <li class="nav-item mx-3" th:if="${session?.u?.hasRole('USER')}" th:classappend="${active == 'ingresar'} ? 'active'">
                                <a class="nav-link"  th:href="${active == 'ingresar'} ? '#' : @{/}">Ingresar</a>
                            </li>
                            <li class="nav-item mx-3" th:if="${session?.u?.hasRole('USER')}" th:classappend="${active == 'chats'} ? 'active'">
                                <a class="nav-link" th:href="${active == 'chats'} ? '#' : @{/}">Chats</a>
                            </li>
                            <li class="nav-item mx-3" th:if="${session?.u?.hasRole('ADMIN')}" th:classappend="${active == 'administrar'} ? 'active'">
                                <a class="nav-link"  th:href="${active == 'administrar'} ? '#' :@{/admin/}">Administrar</a>
                            </li>
                        </th:block>
                    </ul>
                </div>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="flex-grow-0 collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav">
                        <th:block th:if="${session.u}">
                            <li class="nav-item mx-2">
                                <!-- div con posicion relative según el cual se establece la posición del desplegable -->
                                <div class="position-relative">
                                    <div class="p-0 border-0 bg-transparent text-decoration-none"  id="usuarioNav" data-bs-toggle="collapse" href="#menuUsuario" aria-expanded="false" role="button">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                                            <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                        </svg>
                                        <span th:text="${session.u.username}" style=" user-select: none;" >Pepe</span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                                            <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"/>
                                        </svg>
                                    </div>

                                    <div class="collapse desplegableNavbar" id="menuUsuario">
                                        <!-- hace falta otro div porque collapse no es compatible con flex-column -->
                                        <div class="d-flex flex-column cuerpoDespNav">
                                            <a href="#" class="despUsItem">
                                                <div class="d-flex">
                                                    <div>
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-wallet2" viewBox="0 0 16 16">
                                                            <path d="M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9a1.5 1.5 0 0 1 1.432-1.499zM5.562 3H13V1.78a.5.5 0 0 0-.621-.484zM1.5 4a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5z"/>
                                                        </svg>
                                                        <span>0,00$</span>
                                                    </div>
                                                    <span class= "ms-auto">Ingresar</span>
                                                </div>
                                            </a>
                                            <hr class="separadorDesplegable">
                                            <a href="#" class="despUsItem">Perfil</a>
                                            <a href="#" class="despUsItem">Idioma</a>
                                            <a href="#" class="despUsItem">
                                                <div class="d-flex">
                                                    <span>Oscuro</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon-stars-fill ms-auto" viewBox="0 0 16 16">
                                                        <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"/>
                                                        <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"/>
                                                    </svg>
                                                </div>
                                            </a>
                                            <hr class="separadorDesplegable">
                                            <form th:action="@{/logout}" method="post" class="despUsItem">
                                                <button type="submit" id="botonLogout">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"/>
                                                        <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                                                    </svg>
                                                    <span>Cerrar sesión</span>
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                    
                                </div>
                            </li>
                        </th:block>
                        <th:block th:unless="${session.u}">
                            <li class="nav-item d-none d-lg-block"  th:classappend="${active == 'register'} ? 'active'">
                                <a th:href="${active == 'register'} ? '#' : @{/login}" class="botonOvalado nav-link">Registrarse</a></li>
                            <li class="nav-item" th:classappend="${active == 'login'} ? 'active'">
                                <a th:href="${active == 'login'} ? '#' : @{/login}" class="botonOvalado nav-link" >Iniciar sesión</a></li>
                            <li class="nav-item d-flex align-items-center mx-3">
                                <div class="vr"></div>
                            </li>
                            <li class="nav-item align-self-center me-4">
                                <div class="position-relative">
                                    <div class="p-0 border-0 bg-transparent text-decoration-none" data-bs-toggle="collapse" href="#menuAjustes" aria-expanded="false" role="button">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16" id="iconoAjustes">
                                            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                                        </svg>
                                    </div>

                                    <div class="collapse desplegableNavbar" id="menuAjustes">
                                        <div class="d-flex flex-column cuerpoDespNav" id="cuerpoAjustes">
                                            <a href="#" class="despUsItem">Idioma</a>
                                            <a href="#" class="despUsItem">
                                                <div class="d-flex">
                                                    <span>Oscuro</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon-stars-fill ms-auto" viewBox="0 0 16 16">
                                                        <path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278"/>
                                                        <path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.73 1.73 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.73 1.73 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.73 1.73 0 0 0 1.097-1.097zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.16 1.16 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.16 1.16 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732z"/>
                                                    </svg>
                                                </div>
                                            </a>
                                            <hr class="separadorDesplegable">
                                            <form class="despUsItem" th:action="@{/login}" method="post">
                                                <input type="hidden" name="username" value="Jose Luis">
                                                <input type="hidden" name="password" value="aa">
                                                <button type="submit">b</button>
                                            </form>
                            
                                            <form class="despUsItem" th:action="@{/login}" method="post">
                                                <input type="hidden" name="username" value="Ramon">
                                                <input type="hidden" name="password" value="aa">
                                                <button type="submit">a</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </th:block>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
</body>

</html>